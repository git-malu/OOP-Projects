package lm44_yb22.model;

import common.DataPacketChatRoom;
import common.IChatRoom;
import common.IReceiver;

public class MiniModel {
	private IChatRoom chatRoom;
	private IReceiver myReceiver;
	private IMiniModel2MiniViewAdpt miniModel2MiniViewAdpt;
	public MiniModel(IChatRoom newChatRoom, IMiniModel2MiniViewAdpt adpt) {
		// TODO Auto-generated constructor stub
		chatRoom = newChatRoom;
		miniModel2MiniViewAdpt = adpt;
		//myReceiver = receiverStub;
	}
	/**
	 * getter for chatRoom
	 * @return
	 */
	public IChatRoom getChatRoom() {
		return chatRoom;
	}
	
	/**
	 * send message in the chatRoom
	 */
	public void sendMsg(String data) {
		System.out.println( "miniModel sendMsg: " + data);
		chatRoom.sendPacket(new DataPacketChatRoom<String>(String.class, data, myReceiver)); // receiver is sender
	}
	/**
	 * for initialization
	 * @param newReceiver
	 */
	public void setReceiver(IReceiver newReceiver) {
		myReceiver = newReceiver;
	}
	
	/**
	 * add receiver to the chat room.
	 * @param receiver
	 */
	public void addReceiver(IReceiver receiver) {
		chatRoom.addIReceiverStubLocally(receiver);
	}
	
	/**
	 * give mini view the receivers to update user list view
	 */
	public void updateUserListView() {
		miniModel2MiniViewAdpt.updateUserListView(chatRoom.getIReceiverStubs());
	}
	
}
